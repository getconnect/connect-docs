# Visualizing data

To start visualizing data with our visualizations, you must ensure you have first included the viz library.

If you are [using the CDN](#cdn) or [Bower](#bower), make sure you've referenced the library and CSS file.

For [NPM](#npm), make sure you've installed the `connect-js-viz` package and referenced the library and the CSS
(via Browserify or through other means).

Once this is correctly installed, you can start creating visualizations, for example:

<p data-height="300" data-theme-id="17963" data-slug-hash="WvBGEO" data-default-tab="results" data-user="getconnect" class='codepen'>See the Pen <a href='http://codepen.io/getconnect/pen/WvBGEO/'>Connect Text viz</a> by Connect (<a href='http://codepen.io/getconnect'>@getconnect</a>) on <a href='http://codepen.io'>CodePen</a>.</p>

## Creating visualizations

To create a viz, you must specify a **query**, **container** and **options**.  For example, to [visualize a chart](#chart-visualizations):

`connect.chart(query, container, options);`

By using the [metadata](#metadata) from the result set, visualizations **automatically** map the query results to various elements.
For example, [chart visualizations](#chart-visualizations) will automatically decide how to map [groups](#group-by),
[time series](#time-intervals) and [aggregations](#aggregations) to its axes or series. 

**query**

You can specify either a [query](#querying-events) generated by `connect.query` or a **function** that returns a promise
(of a valid result set).

Specifying a **function** that returns a promise can be useful if you want to
[chain promises and run your own custom calculations](#manipulating-results-client-side) on the result set or combine it
with other services' data.  For example:

```js
var query = connect.query('purchases')
    .select({
        totalSales: { sum: 'price' }
    })
    .groupBy('product')
    .interval('monthly');
    
var resultsFactory = function(){
  return query.execute()
    .then(function (results) {
        var newResults = results.clone();
        // modify the new results
        return newResults;
    });
}

var chart = connect.chart(resultsFactory, '#chart');
```

**container**

The container can either be a **string** or **HTMLElement** where you want to render the viz.

Your container **must** have an explicit height for the visualization to display correctly.

**options**

The options for a viz contains [field options](#field-options), [interval options](#interval-options) (if applicable)
and any viz specific options.  For example:

```js
{
    "fields": { /* field options */ },
    "intervals": { /* interval options */ },
    "chart": { /* chart specific options */ },
    "gauge": { /* gauge specific topions */ }
}
```

You should also be mindful of the [viz lifecycle](#viz-lifecycle) so you can [refresh](#refreshing-visualizations),
[update](#updating-visualizations) or [destroy](#destroying-visualizations) visualizations as required.
